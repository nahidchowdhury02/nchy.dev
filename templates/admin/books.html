{% extends "layouts/admin.html" %}

{% block title %}Books Ward{% endblock %}
{% block header_title %}Books Ward{% endblock %}

{% block content %}
  <section class="card form-card">
    <h2>Seek books</h2>
    <form method="get" action="{{ url_for('admin.books') }}" class="inline-form">
      <input type="text" name="q" value="{{ query }}" placeholder="seek title/author" />
      <button type="submit">seek</button>
    </form>
    <p class="small-note">shown: {{ books|length }}</p>
  </section>

  <section class="books-cards" aria-label="Books mobile cards">
    {% for book in books %}
      <article class="card book-card">
        <h3>{{ book.title }}</h3>
        <p class="book-meta">Author(s): {{ book.author or '-' }}</p>
        <p class="book-meta">Year: {{ book.first_publish_year or '-' }}</p>
        <p class="book-meta">Slug: {{ book.slug }}</p>
        <a class="btn-link" href="{{ url_for('admin.book_edit', book_id=book.id) }}">tend</a>
      </article>
    {% else %}
      <article class="card"><p>none found.</p></article>
    {% endfor %}
  </section>

  <section class="books-table card" aria-label="Books desktop table">
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Author(s)</th>
          <th>Year</th>
          <th>Slug</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
          <tr>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.first_publish_year or '-' }}</td>
            <td>{{ book.slug }}</td>
            <td><a href="{{ url_for('admin.book_edit', book_id=book.id) }}">tend</a></td>
          </tr>
        {% else %}
          <tr>
            <td colspan="5">none found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}