{% extends "layouts/admin.html" %}

{% block title %}Dashboard{% endblock %}
{% block header_title %}Dashboard{% endblock %}

{% block content %}
  <section class="card">
    <h2>Control Panel</h2>
    <p>All data is stored in MongoDB.</p>
  </section>

  <section class="card form-card">
    <h2>Homepage notice</h2>
    <form method="post" action="{{ url_for('admin.manage') }}" class="form-grid">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <div class="form-field form-field-full">
        <label for="home_notice_banner_text">Notice banner text</label>
        <p class="small-note">Shown at the top of the home page.</p>
        <textarea
          id="home_notice_banner_text"
          name="home_notice_banner_text"
          rows="3"
          maxlength="240"
          required
        >{{- home_notice_banner_text -}}</textarea>
      </div>

      <div class="form-field form-field-full">
        <button type="submit">Save Notice</button>
      </div>
    </form>
  </section>

  <section class="metric-strip" aria-label="Admin counts">
    <article class="card">
      <h3>Books</h3>
      <p class="metric-value">{{ books_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.books') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Reading</h3>
      <p class="metric-value">{{ reading_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.reading') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Gallery</h3>
      <p class="metric-value">{{ gallery_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.gallery') }}">Manage</a>
    </article>

    <article class="card">
      <h3>GitHub/Research</h3>
      <p class="metric-value">{{ github_research_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.github_research') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Certifications</h3>
      <p class="metric-value">{{ certification_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.certifications') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Music</h3>
      <p class="metric-value">{{ music_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.music') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Notes</h3>
      <p class="metric-value">{{ notes_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.notes') }}">Manage</a>
    </article>

    <article class="card">
      <h3>Failed Logins</h3>
      <p class="metric-value">{{ failed_logins_count }}</p>
      <a class="btn-link" href="{{ url_for('admin.login_attempts') }}">View</a>
    </article>
  </section>
{% endblock %}
