<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INCXCNI</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
  <header>
    <h1>QUIET STACK OF N</h1>
  </header>
 

  <main>
    <div class="notice-banner" role="status" id="notice-banner">
      <span>Dr. Who ? nothing here works as of yet!</span>
      <button class="notice-dismiss" id="notice-dismiss" type="button">ok picasso</button>
    </div>
    <section class="hero-shelves">
      <div class="dev-box">
        <div class="dev-box-header">
          <span class="dev-box-title">The Library</span>
          <span class="dev-box-subtitle">Things gathered over time.</span>
        </div>
        <div class="dev-box-previews" id="dev-previews"></div>
      </div>
      <div class="link-grid">
        <article>
          <h3>Github & Research</h3>
          <p>Work in progress, unfinished ideas, and papers worth keeping.</p>
          <a href="#">view</a>
        </article>
        <article>
          <h3>Gallery</h3>
          <p>Sketches, fragments, and pieces that lasted long enough to be shown.</p>
          <a href="#">view</a>
        </article>
        <article>
          <h3>Music list</h3>
          <p>Sounds for late hours; recordings, mixes, and audio meant to fade into the room.</p>
          <a href="#">listen</a>
        </article>
        <article>
          <h3>Reading List</h3>
          <p>Books I’m moving through slowly, with notes in the margins. might add movies and shows here too</p>
          <a href="#">open</a>
        </article>
        <article>
          <h3>Fun Stuff</h3>
          <p>Experiments that may or may not behave. Some do. Some don’t.</p>
          <a href="#">try</a>
        </article>
        <article>
          <h3>Notes & Logs</h3>
          <p>Thoughts, changes, and quiet reasons for why something became what it is.</p>
          <a href="#">read</a>
        </article>
        <article>
          <h3>eh</h3>
          <p>If you need to reach out for work, exchange, or shared curiosity.</p>
          <a href="mailto:keeper@nchy.dev">email</a>
        </article>
      </div>
    </section>

  </main>

  <div class="modal-overlay" id="modal-overlay" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <h2 id="modal-title">Quick Check</h2>
      <h2>ARE YOU MENTALLY CHALLENGED?</h2>
      <div class="modal-actions">
        <button type="button" class="modal-btn" data-redirect="yes">Yes</button>
        <button type="button" class="modal-btn" data-redirect="no">No</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const dismiss = document.getElementById("notice-dismiss");
      const banner = document.getElementById("notice-banner");
      if (dismiss && banner) {
        dismiss.addEventListener("click", function () {
          banner.remove();
        });
      }

      const modalOverlay = document.getElementById("modal-overlay");
      const redirectUrl = "https://youtu.be/QI8VrXkffcg?si=6j21FCelD-ZuqAAy";
      if (modalOverlay) {
        setTimeout(function () {
          modalOverlay.classList.add("is-visible");
          modalOverlay.setAttribute("aria-hidden", "false");
        }, 5000);

        modalOverlay.addEventListener("click", function (event) {
          const target = event.target;
          if (target && target.classList.contains("modal-btn")) {
            window.location.href = redirectUrl;
          }
        });
      }

      fetch("/static/data/books.json")
        .then(response => response.json())
        .then(books => {
          const previews = document.getElementById("dev-previews");
          const validBooks = books.filter(b => b.google_info && b.google_info !== "No result");
          const previewSlice = validBooks.slice(0, 8);

          previewSlice.forEach((book) => {
            const title = book.original_title || "Untitled";
            const cover = book.openlib_cover_url && book.openlib_cover_url !== "No cover available"
              ? book.openlib_cover_url
              : "/static/img/placeholder.png";
            const preview = document.createElement("div");
            preview.className = "preview-card";
            preview.innerHTML = `<img src="${cover}" alt="${title}">`;
            previews.appendChild(preview);
          });

          window.generateDetailPage = function (index) {
            const book = books[index];
            const info = book.google_info || {};
            const html = `
              <!DOCTYPE html>
              <html lang="en">
              <head>
                <meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>${book.original_title || "Book Detail"}</title>
                <style>
                  body { font-family: Arial; padding: 2rem; line-height: 1.6; }
                  img { max-width: 200px; margin-bottom: 1rem; }
                  .field { margin-bottom: 1rem; }
                </style>
              </head>
              <body>
                <h1>${book.original_title || "Untitled"}</h1>
                <img src="${book.openlib_cover_url !== "No cover available" ? book.openlib_cover_url : "/static/img/placeholder.png"}" alt="cover">
                <div class="field"><strong>Authors:</strong> ${info.authors?.join(", ") || "Not available"}</div>
                <div class="field"><strong>Subtitle:</strong> ${info.subtitle || "Not available"}</div>
                <div class="field"><strong>Publisher:</strong> ${info.publisher || "Not available"}</div>
                <div class="field"><strong>Published Date:</strong> ${info.publishedDate || "Not available"}</div>
                <div class="field"><strong>Category:</strong> ${info.categories?.join(", ") || "Not available"}</div>
                <div class="field"><strong>Rating:</strong> ${info.averageRating || "Not rated"}</div>
                <div class="field"><strong>Ratings Count:</strong> ${info.ratingsCount || 0}</div>
                <div class="field"><strong>Page Count:</strong> ${info.pageCount || "Unknown"}</div>
                <div class="field"><strong>Language:</strong> ${info.language || "Unknown"}</div>
                <div class="field"><strong>Description:</strong><br>${info.description || "No description available."}</div>
              </body>
              </html>
            `;
            const win = window.open("", "_blank");
            win.document.write(html);
            win.document.close();
          };
        })
        .catch(error => {
          console.error("Failed to load books:", error);
        });
    });
  </script>

  <footer>
    Kept here. Nothing rushed.
  </footer>
</body>

</html>
