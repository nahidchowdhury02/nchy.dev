{% extends "layouts/public.html" %}

{% block title %}Reading List{% endblock %}
{% block header_title %}Reading List{% endblock %}

{% block content %}
  <section class="card intro-card">
    <h2>Currently Reading</h2>
    <p>{{ total_books }} in queue. Page {{ page }} of {{ total_pages }}.</p>
  </section>

  <section class="card-grid" aria-label="Reading list">
    {% for book in books %}
      <article class="card book-card">
        <figure class="preview-card">
          <img src="{{ book.cover_url or url_for('static', filename='images/missing book cover.png') }}" alt="cover of {{ book.title or book.original_title }}" loading="lazy" />
        </figure>

        <h3>{{ book.title or book.original_title }}</h3>
        <p class="book-meta">{{ (book.authors or [])|join(', ') or 'unknown author' }}</p>
        <p class="book-meta">{{ book.first_publish_year or 'year unknown' }}</p>

        {% if book.description %}
          <p>{{ book.description[:220] }}{% if book.description|length > 220 %}...{% endif %}</p>
        {% endif %}
      </article>
    {% else %}
      <article class="card"><p>No books yet.</p></article>
    {% endfor %}
  </section>

  {% if total_pages > 1 %}
    <section class="card">
      <div class="inline-actions" aria-label="Reading pagination">
        {% if has_prev %}
          <a class="btn-link" href="{{ url_for('main.reading', page=page-1) }}">Previous</a>
        {% endif %}
        <span class="small-note">Page {{ page }} / {{ total_pages }}</span>
        {% if has_next %}
          <a class="btn-link" href="{{ url_for('main.reading', page=page+1) }}">Next</a>
        {% endif %}
      </div>
    </section>
  {% endif %}

  <div class="inline-actions">
    <a class="btn-link" href="{{ url_for('admin.reading') }}">Manage Reading List</a>
  </div>
{% endblock %}
